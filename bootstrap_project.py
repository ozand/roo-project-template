# /path/to/your/roo-project-template/bootstrap_project.py
import shutil
from pathlib import Path

# --- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –®–ê–ë–õ–û–ù–ê ---
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–∞–º —à–∞–±–ª–æ–Ω (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —ç—Ç–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞)
TEMPLATE_ROOT = Path(__file__).parent.resolve()

# --- –ù–û–í–û–ï: "–ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫" –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è ---
# –≠—Ç–∏ –ø–∞–ø–∫–∏ –±—É–¥—É—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ —à–∞–±–ª–æ–Ω–∞ –≤ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Ü–µ–ª–∏–∫–æ–º.
DIRECTORIES_TO_COPY = [
    ".roo",
    "scripts",
]

# –≠—Ç–∏ –ø–∞–ø–∫–∏ –±—É–¥—É—Ç –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω—ã –ø—É—Å—Ç—ã–º–∏
DIRECTORIES_TO_CREATE = [
    "pages",
    "journals",
    "assets",
    "logseq",
]

def bootstrap_project(target_root: Path):
    """
    –°–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ –∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –∫–æ–ø–∏—Ä—É–µ—Ç —ç—Ç–∞–ª–æ–Ω–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
    –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è-—à–∞–±–ª–æ–Ω–∞ –≤ —Ü–µ–ª–µ–≤–æ–π –ø—Ä–æ–µ–∫—Ç.
    """
    print(f"–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤: {target_root}\n")

    # --- –®–∞–≥ 1: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å —Ñ–∞–π–ª–∞–º–∏ ---
    print("–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π...")
    for dir_name in DIRECTORIES_TO_COPY:
        source_dir = TEMPLATE_ROOT / dir_name
        target_dir = target_root / dir_name

        if source_dir.is_dir():
            try:
                shutil.copytree(source_dir, target_dir)
                print(f"‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è '{dir_name}' —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞.")
            except FileExistsError:
                print(f"‚ö†Ô∏è  –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è '{dir_name}' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ü—Ä–æ–ø—É—Å–∫–∞—é.")
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ '{dir_name}': {e}")
        else:
            print(f"‚ö†Ô∏è  –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –ò—Å—Ö–æ–¥–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {source_dir}")

    # --- –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π ---
    print("\n–°–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è Logseq...")
    for dir_name in DIRECTORIES_TO_CREATE:
        target_dir = target_root / dir_name
        try:
            target_dir.mkdir(parents=True, exist_ok=True)
            print(f"‚úÖ –°–æ–∑–¥–∞–Ω–∞/–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: {dir_name}")
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ '{dir_name}': {e}")

    print("\nüéâ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
    print("–ù–µ –∑–∞–±—É–¥—å—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å `uv run python scripts/development/generate_logseq_config.py` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä–∞—Ñ–∞.")

if __name__ == "__main__":
    # –°–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
    new_project_path = Path.cwd()
    bootstrap_project(new_project_path)