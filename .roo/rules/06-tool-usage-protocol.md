# 6. Протокол Предпочтения Инструментов

### 1. Золотое Правило

**МАНДАТ:** Ты **обязан** всегда отдавать предпочтение специализированным инструментам RooCode (`read_file`, `list_files`, `write_to_file` и т.д.) перед универсальным инструментом `execute_command`. Инструмент `execute_command` следует использовать только в тех случаях, когда задача не может быть выполнена специализированным инструментом.

### 2. Таблица Соответствия: Что Использовать Вместо Команд Терминала

Эта таблица определяет, какой инструмент RooCode является предпочтительным для выполнения распространенных задач.

| Вместо этих команд терминала... | **Всегда используй этот инструмент RooCode** | Почему это лучше |
| :--- | :--- | :--- |
| `cat`, `head`, `tail`, `less`, `more` | **`<read_file>`** | [cite_start]Возвращает контент с номерами строк, поддерживает частичное чтение больших файлов и безопасен[cite: 485, 487]. |
| `ls`, `find`, `tree` | **`<list_files>`** | [cite_start]Работает рекурсивно, уважает `.gitignore` и `.rooignore`, интеллектуально форматирует вывод для лучшего понимания структуры проекта[cite: 445, 450]. |
| `echo "..." >`, `echo "..." >>` | **`<write_to_file>`** или **`<insert_content>`** | [cite_start]Предоставляет **интерактивное окно diff** для утверждения изменений, что является критически важным элементом безопасности[cite: 679, 391]. Предотвращает случайную перезапись файлов. |
| `touch`, `mkdir` | **`<write_to_file>`** | `write_to_file` автоматически создает файл и необходимые директории. [cite_start]Явное создание пустого файла или папки редко требуется[cite: 680]. |
| `sed`, `awk` | **`<search_and_replace>`** или **`<apply_diff>`** | [cite_start]Предоставляют мощные и безопасные способы для поиска и замены, включая поддержку regex и интерактивное утверждение[cite: 542, 241]. |
| `grep`, `rg` | **`<search_files>`** или **`<codebase_search>`** | [cite_start]`search_files` использует Ripgrep для быстрого поиска и предоставляет контекст[cite: 578, 583]. [cite_start]`codebase_search` выполняет семантический поиск по смыслу, а не только по ключевым словам[cite: 354, 355]. |
| `mv`, `cp`, `rm` | **(Исключение) `execute_command`** | Для этих операций пока нет специализированных инструментов. Используй `execute_command`, но **обязательно** запроси подтверждение у пользователя через `<ask_followup_question>` перед удалением или перемещением файлов. |

### 3. Когда Использование `execute_command` Оправдано

Ты **должен** использовать `execute_command` для следующих типов задач:

* [cite_start]**Запуск скриптов и процессов:** Установка зависимостей (`npm install`, `pip install`), запуск серверов разработки (`npm run dev`), сборка проекта (`npm run build`)[cite: 383, 384, 387].
* **Работа с системами контроля версий:** `git status`, `git commit`, `git push`[cite: 385].
* [cite_start]**Выполнение специфичных утилит:** Запуск тестов (`pytest`), линтеров (`eslint`) или других инструментов командной строки, для которых нет аналога в RooCode[cite: 388].
* **Операции с файловой системой (с осторожностью):** Перемещение, копирование и удаление файлов, как указано в таблице выше.

### 4. Обоснование

Этот протокол существует для повышения **надежности, безопасности и эффективности** твоей работы. Специализированные инструменты предоставляют структурированные данные, имеют встроенные механизмы защиты (например, утверждение через diff) и лучше интегрированы в среду RooCode.